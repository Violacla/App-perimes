<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Gestion Perimé - Pharmacie du Libron</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0; padding: 0;
      background: #f9f9f9;
    }
    /* Bandeau bleu glacé en haut */
    header {
      background: #0b2e59; /* bleu glacé */
      color: white;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 15px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    header .left,
    header .right {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    header h1 {
      font-size: 18px;
      font-weight: 700;
      margin: 0;
      user-select: none;
      color: white;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    button, select {
      background: transparent;
      border: 1px solid white;
      color: white;
      border-radius: 3px;
      padding: 5px 10px;
      cursor: pointer;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 14px;
      transition: background-color 0.3s, color 0.3s;
    }
    button:hover, select:hover {
      background: white;
      color: #0b2e59;
      border-color: white;
    }
    button svg {
      width: 16px;
      height: 16px;
      fill: white;
      transition: fill 0.3s;
    }
    button:hover svg {
      fill: #0b2e59;
    }
    /* Logo rond */
    .logo-circle {
      width: 32px;
      height: 32px;
      background: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #0b2e59;
      font-weight: bold;
      font-size: 18px;
      user-select: none;
      margin-left: 15px;
      flex-shrink: 0;
    }
    /* Tableau principal */
    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 20px;
      background: white;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: left;
      font-size: 14px;
    }
    tbody tr:nth-child(even) {
      background-color: rgba(188, 215, 237, 0.15); /* #bcd7ed opacity 15% */
    }
    tbody tr.selected {
      background-color: rgba(188, 215, 237, 0.5); /* #bcd7ed opacity 50% */
    }
    td.editable {
      cursor: text;
      background: #f0f8ff;
    }
    td.editable:focus {
      outline: 2px solid #0b2e59;
      background: #e0f0ff;
    }
    /* Popup Notification */
    #notification-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      border: 2px solid #0b2e59;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      width: 600px;
      max-height: 70vh;
      overflow-y: auto;
      display: none;
      flex-direction: column;
      border-radius: 8px;
      z-index: 1500;
      padding: 10px;
    }
    #notification-popup .header {
      background: #0b2e59;
      color: white;
      padding: 10px;
      font-weight: bold;
      font-size: 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-top-left-radius: 6px;
      border-top-right-radius: 6px;
    }
    #notification-popup .header button.close-popup {
      background: transparent;
      border: none;
      font-size: 20px;
      color: white;
      cursor: pointer;
      line-height: 1;
    }
    #notification-popup .content {
      padding: 10px;
      font-size: 14px;
      color: #0b2e59;
    }
    #notification-popup table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 8px;
    }
    #notification-popup th, #notification-popup td {
      border: 1px solid #ccc;
      padding: 6px;
      text-align: left;
      font-size: 13px;
    }
    #notification-popup tbody tr:nth-child(even) {
      background-color: rgba(188, 215, 237, 0.15);
    }
    #notification-popup .month-section {
      margin-bottom: 20px;
    }
    /* Imprimer uniquement le popup */
    @media print {
      body * {
        visibility: hidden;
      }
      #notification-popup, #notification-popup * {
        visibility: visible;
      }
      #notification-popup {
        position: static;
        transform: none;
        width: 100%;
        max-height: none;
        box-shadow: none;
        border: none;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="left">
      <button id="btn-home" title="Retour à l'accueil" aria-label="Retour à l'accueil">
        <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" style="width:22px;height:22px;">
          <path d="M32 12l20 20h-6v20h-28v-20h-6z" stroke="white" stroke-width="2" fill="none" />
          <path d="M26 32v12h12v-12" fill="white"/>
        </svg>
      </button>
      <h1>Gestion Perimé - Pharmacie du Libron</h1>
      <select id="operator" title="Choisir un opérateur" aria-label="Choisir un opérateur">
        <option value="">-- Choisir Opérateur --</option>
        <option>Op1</option>
        <option>Op2</option>
        <option>Op3</option>
        <option>Op4</option>
      </select>
      <button id="btn-confirm-operator" title="Valider opérateur">Valider</button>
    </div>
    <div class="right" style="display:flex; align-items:center; gap: 10px;">
      <div class="logo-circle" aria-label="Logo Pharmacie">P</div>
      <button id="btn-notification" title="Notifications">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false" style="width:16px;height:16px;">
          <path d="M12 22c1.1 0 2-.89 2-1.99h-4c0 1.1.9 1.99 2 1.99zM18 16v-5c0-3.07-1.63-5.64-4.5-6.32V4a1.5 1.5 0 0 0-3 0v.68C7.63 5.36 6 7.92 6 11v5l-1.99 2H20l-2-2z" fill="white"/>
        </svg>
        Notifications
      </button>
      <button id="btn-history" title="Historique">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false" style="width:16px;height:16px;">
          <path d="M13 3a9 9 0 1 0 9 9h-2a7 7 0 1 1-7-7v3l4-4-4-4v3z" fill="white"/>
        </svg>
        Historique
      </button>
      <button id="btn-logout" title="Déconnexion">Déconnexion</button>
    </div>
  </header>

  <main style="padding:15px; max-width: 900px; margin: auto;">
    <table id="product-table" aria-label="Tableau des produits périmés">
      <thead>
        <tr>
          <th>Date</th>
          <th>Boîte</th>
          <th>Nb Perimé</th>
          <th>Nb Retiré</th>
          <th>Nb Dispo</th>
          <th>Remarque</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>01/03/2025</td>
          <td>Paracétamol</td>
          <td>5</td>
          <td class="editable" contenteditable="true" aria-label="Modifier le nombre retiré">2</td>
          <td>3</td>
          <td class="editable" contenteditable="true" aria-label="Modifier la remarque">Attention emballage abîmé</td>
        </tr>
        <tr>
          <td>10/03/2025</td>
          <td>Ibuprofène</td>
          <td>10</td>
          <td class="editable" contenteditable="true">0</td>
          <td>10</td>
          <td class="editable" contenteditable="true"></td>
        </tr>
        <tr>
          <td>15/03/2025</td>
          <td>Amoxicilline</td>
          <td>3</td>
          <td class="editable" contenteditable="true">1</td>
          <td>2</td>
          <td class="editable" contenteditable="true">Contrôle à refaire</td>
        </tr>
      </tbody>
    </table>
  </main>

  <!-- Popup Notification -->
  <div id="notification-popup" role="dialog" aria-modal="true" aria-labelledby="notif-title" aria-describedby="notif-desc">
    <div class="header">
      <span id="notif-title">Notifications des périmés (3 mois)</span>
      <div>
        <button id="btn-print" title="Imprimer" aria-label="Imprimer la liste des notifications" style="margin-right:8px;">
          Imprimé
        </button>
        <button class="close-popup" aria-label="Fermer la fenêtre">&times;</button>
      </div>
    </div>
    <div class="content" id="notif-desc">
      <!-- Exemple de contenu notifications par mois -->
      <div class="month-section">
        <h4>Mars 2025</h4>
        <table>
          <thead>
            <tr>
              <th>Date</th>
              <th>Boîte</th>
              <th>Nb Perimé</th>
              <th>Nb Retiré</th>
              <th>Nb Dispo</th>
              <th>Remarque</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>01/03/2025</td>
              <td>Paracétamol</td>
              <td>5</td>
              <td>2</td>
              <td>3</td>
              <td>Attention emballage abîmé</td>
            </tr>
            <tr>
              <td>10/03/2025</td>
              <td>Ibuprofène</td>
              <td>10</td>
              <td>0</td>
              <td>10</td>
              <td></td>
            </tr>
            <tr>
              <td>15/03/2025</td>
              <td>Amoxicilline</td>
              <td>3</td>
              <td>1</td>
              <td>2</td>
              <td>Contrôle à refaire</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <script>
    // Afficher/cacher popup notification
    const btnNotif = document.getElementById('btn-notification');
    const popup = document.getElementById('notification-popup');
    const btnClose = popup.querySelector('.close-popup');
    const btnPrint = document.getElementById('btn-print');

    btnNotif.addEventListener('click', () => {
      popup.style.display = 'flex';
    });
    btnClose.addEventListener('click', () => {
      popup.style.display = 'none';
    });

    // Imprimer uniquement la popup notification
    btnPrint.addEventListener('click', () => {
      window.print();
    });

    // Gestion de l'édition dans la table principale
    const editableCells = document.querySelectorAll('td.editable');
    editableCells.forEach(cell => {
      cell.addEventListener('input', () => {
        // Ici tu peux ajouter sauvegarde, validation, etc.
        console.log('Contenu modifié:', cell.textContent);
      });
    });
  </script>
</body>
</html>
